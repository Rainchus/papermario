#include "common.h"
#include "hud_element.h"
#include "dx/config.h"

s32 hp_bar_offset_x = 3;
s32 hp_bar_offset_y = -1;
s32 hp_bar_width = 100;
s32 hp_bar_height = 28;

#define DRAW_BOX(flags, style, xPos, yPos, width, height, opacity) draw_box(flags, style, xPos, yPos, 0, width, height, opacity, 0, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, NULL, NULL, NULL, SCREEN_WIDTH, SCREEN_HEIGHT, NULL)

s32 HeartCI4Raster[] = {
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x01111100, 0x00011111, 0x00000000,
0x00000001, 0x11111110, 0x00111111, 0x11000000,
0x00000011, 0x12332111, 0x01112332, 0x11100000,
0x00000111, 0x34444321, 0x11234444, 0x51110000,
0x00000113, 0x46776684, 0x33486644, 0x35110000,
0x00001124, 0x67766668, 0x88866664, 0x35211000,
0x00001134, 0x77644488, 0x88844444, 0x55511000,
0x00001146, 0x76842288, 0x88842233, 0x55511000,
0x00001146, 0x68841144, 0x44441133, 0x55511000,
0x00001146, 0x68841144, 0x44441133, 0x55511000,
0x00001138, 0x68841144, 0x44441133, 0x55511000,
0x00000124, 0x68841144, 0x44441133, 0x55210000,
0x00000113, 0x88842244, 0x44442233, 0x55110000,
0x00000012, 0x48844444, 0x44444333, 0x52100000,
0x00000011, 0x34444444, 0x44444335, 0x51100000,
0x00000001, 0x13444444, 0x44444335, 0x11000000,
0x00000000, 0x11333333, 0x33333351, 0x10000000,
0x00000000, 0x01153333, 0x33333511, 0x00000000,
0x00000000, 0x00112555, 0x55552110, 0x00000000,
0x00000000, 0x00011925, 0x55291100, 0x00000000,
0x00000000, 0x00001119, 0x29111000, 0x00000000,
0x00000000, 0x00000011, 0x11100000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000
};

s32 HeartCI4Palette[] = {
	0x00006907, 0xC1C9E24B, 0xE2CFE987, 0xEC59ED5F,
	0xE3D5A107, 0x00000000, 0x00000000, 0x00000000,
};

s32 HeartCI4PaletteBlue[] = {
	0x000011D9, 0x1B3123B9, 0x3439137B, 0x5CFB757B,
	0x4CB912E9, 0x00010001, 0x00010001, 0x00010001,
};

s32 FlowerCI4Raster[] = {
	0x00000000, 0x00000000, 0x00000000, 0x00000000,
	0x00000000, 0x00000000, 0x00000000, 0x00000000,
	0x00000000, 0x00000111, 0x11100000, 0x00000000,
	0x00000000, 0x00011122, 0x22111000, 0x00000000,
	0x00000000, 0x00112333, 0x33321100, 0x00000000,
	0x00000000, 0x01143333, 0x33334110, 0x00000000,
	0x00000000, 0x11133333, 0x33333111, 0x00000000,
	0x00000011, 0x11143355, 0x55334111, 0x11000000,
	0x00000112, 0x33422666, 0x66621433, 0x21100000,
	0x00001143, 0x33326777, 0x77762333, 0x34110000,
	0x00001233, 0x33586677, 0x77668533, 0x33210000,
	0x00001433, 0x33679977, 0x77997633, 0x33410000,
	0x00001433, 0x35679977, 0x77997653, 0x33410000,
	0x00001433, 0x35679977, 0x77997653, 0x33410000,
	0x00001133, 0x35976677, 0x77667953, 0x33110000,
	0x00001112, 0x42987777, 0x77778924, 0x21110000,
	0x00000111, 0x12967777, 0x77776921, 0x11100000,
	0x00000011, 0x43496877, 0x77869434, 0x11000000,
	0x00000114, 0x33349666, 0x66694333, 0x41100000,
	0x00000114, 0x33333499, 0x99433333, 0x41100000,
	0x00000112, 0x33333332, 0x23333333, 0x21100000,
	0x0000AA11, 0x24333341, 0x14333342, 0x11AA0000,
	0x0000AAB1, 0x11244411, 0x11444211, 0x1BAA0000,
	0x0000AABB, 0xA111111B, 0xB111111A, 0xBBAA0000,
	0x00000AAA, 0xABCCBBAA, 0xAABBCCBA, 0xAAA00000,
	0x000000AA, 0xCDDBCCAA, 0xAACCBDDC, 0xAA000000,
	0x0000AAAC, 0xDDDDDCAA, 0xAACDDDDD, 0xCAAA0000,
	0x0000AACD, 0xDDDDCBAA, 0xAABCDDDD, 0xDCAA0000,
	0x0000AABB, 0xCCCBBAA0, 0x0AABBCCC, 0xBBAA0000,
	0x00000AAA, 0xAAAAAA00, 0x00AAAAAA, 0xAAA00000,
	0x00000000, 0x00000000, 0x00000000, 0x00000000,
	0x00000000, 0x00000000, 0x00000000, 0x00000000
};

s32 FlowerCI4Palette[] = {
	0x000011D3, 0x6C2BE7FB, 0x8E39F6A3, 0xDCC9FE41,
	0xF543A341, 0x01C12B85, 0x3CC57E07, 0x00000000,
};

s32 MasterHeadRedRaster[] = {
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00001111, 0x11100000, 0x00000000,
0x00000000, 0x00111111, 0x11111000, 0x00000000,
0x00000000, 0x01123444, 0x44321100, 0x00000000,
0x00000000, 0x11344444, 0x44443110, 0x00000000,
0x00000001, 0x24444444, 0x44444421, 0x00000000,
0x00000011, 0x44444444, 0x44444441, 0x10000000,
0x00000113, 0x44444411, 0x13411143, 0x11000000,
0x00000124, 0x44444156, 0x71156514, 0x11000000,
0x00001134, 0x44444165, 0x67165614, 0x21100000,
0x00001144, 0x44444315, 0x67165131, 0x11100000,
0x00001144, 0x43111116, 0x71356389, 0x81100000,
0x00001144, 0x1899A811, 0x23421199, 0x91100000,
0x00001143, 0x199999A1, 0x11111A99, 0xA1100000,
0x00001111, 0xBA999998, 0x155189A8, 0x11100000,
0x00001176, 0x711118A9, 0x91519A13, 0x21000000,
0x00000111, 0x1321C511, 0x11511512, 0x11000000,
0x00000113, 0x4435DDD1, 0x1DD11D11, 0x10000000,
0x00000011, 0x331CDDD5, 0x1DD15D11, 0x00000000,
0x00000001, 0x111CDDDD, 0xDDDDD511, 0x00000000,
0x00000000, 0x1115DDDD, 0xC11DD110, 0x00000000,
0x00000000, 0x00115DDD, 0x15DD1110, 0x00000000,
0x00000000, 0x001115CD, 0xDDC11100, 0x00000000,
0x00000000, 0x00011111, 0x11111000, 0x00000000,
0x00000000, 0x00000111, 0x11100000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000
};

s32 MasterHeadRedPalette[] = {
0x00003887, 0x50435887, 0x70C77A49, 0xCCD3C405,
0x6319B5AD, 0x7BDF8B09, 0x9B0DAC17, 0x00010001
};

s32 MasterHeadYellowRaster[] = {
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00001111, 0x11100000, 0x00000000,
0x00000000, 0x00111111, 0x11111000, 0x00000000,
0x00000000, 0x01123444, 0x44321100, 0x00000000,
0x00000000, 0x11344444, 0x44443110, 0x00000000,
0x00000001, 0x24444444, 0x44444421, 0x00000000,
0x00000011, 0x44444444, 0x44444441, 0x10000000,
0x00000113, 0x44444411, 0x13411143, 0x11000000,
0x00000124, 0x44444156, 0x71156514, 0x11000000,
0x00001134, 0x44444165, 0x67165614, 0x21100000,
0x00001144, 0x44444315, 0x67165131, 0x11100000,
0x00001144, 0x43111116, 0x71356389, 0x81100000,
0x00001144, 0x18993811, 0x23421199, 0x91100000,
0x00001143, 0x19999931, 0x11111399, 0x31100000,
0x00001111, 0x53999998, 0x15518938, 0x11100000,
0x00001176, 0x71111839, 0x91519313, 0x21000000,
0x00000111, 0x1321A511, 0x11511512, 0x11000000,
0x00000113, 0x4435BBB1, 0x1BB11B11, 0x10000000,
0x00000011, 0x331ABBB5, 0x1BB15B11, 0x00000000,
0x00000001, 0x111ABBBB, 0xBBBBB511, 0x00000000,
0x00000000, 0x1115BBBB, 0xA11BB110, 0x00000000,
0x00000000, 0x00115BBB, 0x15BB1110, 0x00000000,
0x00000000, 0x001115AB, 0xBBA11100, 0x00000000,
0x00000000, 0x00011111, 0x11111000, 0x00000000,
0x00000000, 0x00000111, 0x11100000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000
};

s32 MasterHeadYellowPalette[] = {
0x00003987, 0x62C59C91, 0xD6418B09, 0xCCD3C405,
0x6319C61F, 0x9BCFBD13, 0x00010001, 0x00010001
};

HudScript HeartIconScript = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_32x32)
    hs_SetScale(0.50)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 3, HeartCI4Raster, HeartCI4Palette,
    hs_Restart
    hs_End
};


HudScript FlowerIconScript = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_32x32)
    hs_SetScale(0.50)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 3, FlowerCI4Raster, FlowerCI4Palette,
    hs_Restart
    hs_End
};

HudScript MasterHeadRedHPScript = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_32x32)
    hs_SetScale(0.50)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 3, MasterHeadRedRaster, MasterHeadRedPalette,
    hs_Restart
    hs_End
};

HudScript MasterHeadYellowHPScript = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_32x32)
    hs_SetScale(0.50)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 3, MasterHeadYellowRaster, MasterHeadYellowPalette,
    hs_Restart
    hs_End
};

void ReplaceHeartIconPalette(s32* newPal) {
    HeartIconScript[9] = newPal;
}

void MasterReplaceRasterAndPal(s32* newRaster, s32* newPal) {
    MasterHeadRedHPScript[8] = newRaster;
    MasterHeadRedHPScript[9] = newPal;
}

s32 fontDivisionSymbolRaster[] = {
0x00000000, 0x00000BB4, 0x0000BDA4, 0x000BED44,
0x00ADE845, 0x00CEA450, 0x0CEC4400, 0xBEE74500,
0xCEA44000, 0xBA440000, 0x54400000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font0Raster[] = {
0x00000000, 0x00000000, 0x000AC750, 0x00000000,
0x005EFE75, 0x00000000, 0x05CFCFE7, 0x30000000,
0x05FE2AFA, 0x10000000, 0x5CFA14FA, 0x10000000,
0x7FD114FA, 0x10000000, 0xCFE51AFA, 0x10000000,
0x5CFCAFD3, 0x10000000, 0x35CFFD41, 0x10000000,
0x03577211, 0x00000000, 0x00311110, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font1Raster[] = {
0x00000000, 0x00000000, 0x000ACE72, 0x00000000,
0x05CEFFA1, 0x30000000, 0x0AFFDF51, 0x30000000,
0x00AADD12, 0x00000000, 0x0025EA12, 0x00000000,
0x000CF713, 0x00000000, 0x005FE213, 0x00000000,
0x00CFD120, 0x00000000, 0x00CFA130, 0x00000000,
0x003A3130, 0x00000000, 0x00111230, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font2Raster[] = {
0x00000000, 0x00000000, 0x057CDC00, 0x00000000,
0x5ADFFFC0, 0x00000000, 0xCEFEAFF5, 0x20000000,
0x7FD4CFE4, 0x20000000, 0x211AFE41, 0x20000000,
0x00AFD412, 0x00000000, 0x0AFD3155, 0x30000000,
0x7FE7ACFA, 0x10000000, 0xDEDEFEEA, 0x10000000,
0x2DDCA533, 0x10000000, 0x01111111, 0x30000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font3Raster[] = {
0x00000000, 0x00000000, 0x07CEFD53, 0x00000000,
0x7DFFFFD5, 0x30000000, 0xEFC2AFC2, 0x10000000,
0x5A17FD51, 0x30000000, 0x213DF512, 0x00000000,
0x5723DF70, 0x00000000, 0xAFC23DFA, 0x20000000,
0xEFFCADFA, 0x10000000, 0x2CEFFE71, 0x10000000,
0x025AA511, 0x00000000, 0x00211113, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font4Raster[] = {
0x00000000, 0x00000000, 0x005DD750, 0x00000000,
0x00DFE512, 0x00000000, 0x0AFE7313, 0x00000000,
0x5EFAFC10, 0x00000000, 0xAFA2ED23, 0x00000000,
0xCF23EEE7, 0x20000000, 0xEFEEFFEA, 0x10000000,
0x7CADFA23, 0x10000000, 0x211FF511, 0x30000000,
0x03377310, 0x00000000, 0x00311120, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font5Raster[] = {
0x00000000, 0x00000000, 0x007EFFF5, 0x10000000,
0x05EFDDD5, 0x10000000, 0x07FD2222, 0x30000000,
0x0CFAACC2, 0x00000000, 0x7EFFEEFA, 0x20000000,
0xADA517ED, 0x13000000, 0x3212AFD7, 0x10000000,
0x00AEFE71, 0x20000000, 0x00DFE512, 0x30000000,
0x00575123, 0x00000000, 0x00311230, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font6Raster[] = {
0x00000000, 0x00000000, 0x005DE723, 0x00000000,
0x00AFF513, 0x00000000, 0x07DF7130, 0x00000000,
0x0AEECA30, 0x00000000, 0x7EFCCFA3, 0x50000000,
0xAEC22DFA, 0x10000000, 0xCF712AFA, 0x10000000,
0x5DFCAFD2, 0x10000000, 0x05DFFD21, 0x20000000,
0x03357212, 0x30000000, 0x00311120, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font7Raster[] = {
0x00000000, 0x00000000, 0x07DFFFFC, 0x00000000,
0x0CFDACFD, 0x10000000, 0x7EF31AE5, 0x10000000,
0x7F517FC1, 0x20000000, 0x0213EE31, 0x30000000,
0x032CFA12, 0x00000000, 0x007FE413, 0x00000000,
0x007FE210, 0x00000000, 0x007FD210, 0x00000000,
0x00373110, 0x00000000, 0x00311100, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font8Raster[] = {
0x00000000, 0x00000000, 0x0ADFFD00, 0x00000000,
0xAED3AFD3, 0x10000000, 0xCF111DF3, 0x10000000,
0x0DD5FFC1, 0x20000000, 0x07FFFE52, 0x00000000,
0x7EFA7DF7, 0x10000000, 0xDFA117FD, 0x10000000,
0xAEFAAFE5, 0x10000000, 0x07EFFE51, 0x10000000,
0x02577411, 0x00000000, 0x00211110, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 font9Raster[] = {
0x00000000, 0x00000000, 0x5DFFFFA0, 0x00000000,
0xCFEAAEE7, 0x20000000, 0xDF7115E5, 0x10000000,
0xDFE57E51, 0x20000000, 0x5DEEEE71, 0x00000000,
0x023AEC12, 0x00000000, 0x007CE413, 0x00000000,
0x00AEE220, 0x00000000, 0x00EED120, 0x00000000,
0x00575130, 0x00000000, 0x00011100, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
0x00000000, 0x00000000, 0x00000000, 0x00000000,
};

s32 fontPalette[] = {
0x00006B5B, 0x739D739D, 0x8C6394A5, 0xB801A529,
0xA529A529, 0xAD6BBDEF, 0xD6B5E739, 0xEF7BFFFF,
};

HudScript HES_StatusSlash = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_8x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, fontDivisionSymbolRaster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit0 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font0Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit1 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font1Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit2 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font2Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit3 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font3Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit4 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font4Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit5 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font5Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit6 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font6Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit7 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font7Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit8 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font8Raster, fontPalette,
    hs_Restart
    hs_End
};

HudScript HES_StatusDigit9 = {
    hs_SetVisible
    hs_SetTileSize(HUD_ELEMENT_SIZE_16x16)
    hs_Loop
    HUD_ELEMENT_OP_SetCI, 60, font9Raster, fontPalette,
    hs_Restart
    hs_End
};
